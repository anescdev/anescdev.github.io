
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../Tema%205/practica5-1/">
      
      
        <link rel="next" href="../practica6-2/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Práctica 6.1: Dockerización del despliegue de una aplicación con NodeJS - AnesCatmanDev Daw</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-61-dockerizacion-del-despliegue-de-una-aplicacion-con-nodejs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AnesCatmanDev Daw" class="md-header__button md-logo" aria-label="AnesCatmanDev Daw" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AnesCatmanDev Daw
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica 6.1: Dockerización del despliegue de una aplicación con NodeJS
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AnesCatmanDev Daw" class="md-nav__button md-logo" aria-label="AnesCatmanDev Daw" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AnesCatmanDev Daw
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to MkDocs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DAWEB
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            DAWEB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Tema 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.1: Instalación y configuración de un servidor web Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.2: Autenticación en un servidor web Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.3: Proxy inverso con Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.4: Balanceo de carga con proxy inverso en Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica 2.5: Proxy inverso y balanceo de carga con SSL en NGINX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-amp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica de amplicación: Configuración de un servidor Nginx con Hosts Virtuales y directorios de usuario
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Tema 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.1: Instalación de Tomcat y Maven para despliegue de aplicación Java
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.2: Despliegue de aplicaciones con Node Express y en Netlify
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.3: Despliegue de una aplicación Flask (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 4
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Tema 4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%204/practica4-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 4.1: Configuración de un servidor DNS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 5
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Tema 5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%205/practica5-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 5.1: Ejercicios de Git
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 6
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Tema 6
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Práctica 6.1: Dockerización del despliegue de una aplicación con NodeJS
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Práctica 6.1: Dockerización del despliegue de una aplicación con NodeJS
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalación de Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anadir-el-repositorio-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Añadir el repositorio de Docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalar-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Instalar docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clonacion-de-proyecto-nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      Clonación de proyecto NodeJS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-la-imagen-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la imagen de docker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-del-contenedor-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Creación del contenedor de docker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrando-multiples-contenedores" class="md-nav__link">
    <span class="md-ellipsis">
      Integrando múltiples contenedores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrando múltiples contenedores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-tablas-de-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Crear tablas de la base de datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejecutar-tests-de-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Ejecutar tests de la aplicación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#poner-en-marcha-la-app" class="md-nav__link">
    <span class="md-ellipsis">
      Poner en marcha la app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probando-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Probando la aplicación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica6-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.2: Despliegue de una aplicación PHP con Nginx y MySQL usando Docker y docker-compose
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica6-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.3: Despliegue de servidores web con usuarios autenticados mediante LDAP usando Docker y docker-compose
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de Docker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instalación de Docker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anadir-el-repositorio-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Añadir el repositorio de Docker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instalar-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Instalar docker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clonacion-de-proyecto-nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      Clonación de proyecto NodeJS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-la-imagen-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de la imagen de docker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-del-contenedor-de-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Creación del contenedor de docker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrando-multiples-contenedores" class="md-nav__link">
    <span class="md-ellipsis">
      Integrando múltiples contenedores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integrando múltiples contenedores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#crear-tablas-de-la-base-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      Crear tablas de la base de datos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ejecutar-tests-de-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Ejecutar tests de la aplicación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#poner-en-marcha-la-app" class="md-nav__link">
    <span class="md-ellipsis">
      Poner en marcha la app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probando-la-aplicacion" class="md-nav__link">
    <span class="md-ellipsis">
      Probando la aplicación
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-61-dockerizacion-del-despliegue-de-una-aplicacion-con-nodejs">Práctica 6.1: Dockerización del despliegue de una aplicación con NodeJS</h1>
<h2 id="instalacion-de-docker">Instalación de Docker</h2>
<p>Docker en algunos sistemas no está añadido por defecto los paquetes para instalarlo y actualizarlo con el gestor del paquetes, por lo que tenemos dos
formas de instalarlo:</p>
<ol>
<li>Descargando el paquete correspondiente desde la <a href="https://docs.docker.com/get-started/get-docker/">web</a></li>
<li>Añadiendo los repositorios al sistema</li>
</ol>
<p>Yo lo haré añadiendo los repositorios al sistema</p>
<h3 id="anadir-el-repositorio-de-docker">Añadir el repositorio de Docker</h3>
<p>Para esto podemos ejecutar los siguientes comandos uno a uno o crear un script de shell para ejecutarlo todo más sencillo, eso es lo que haré yo ya que
son bastantes comandos y teniendo la oportunidad de poder hacerlo todo de una, lo prefiero. El script que he usado es el que viene en la guía de instalación de Docker:</p>
<p><div class="language-sh highlight"><span class="filename">add_docker_repo.sh</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Add Docker&#39;s official GPG key:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ca-certificates<span class="w"> </span>curl
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>sudo<span class="w"> </span>install<span class="w"> </span>-m<span class="w"> </span><span class="m">0755</span><span class="w"> </span>-d<span class="w"> </span>/etc/apt/keyrings
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>sudo<span class="w"> </span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://download.docker.com/linux/debian/gpg<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/docker.asc
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>sudo<span class="w"> </span>chmod<span class="w"> </span>a+r<span class="w"> </span>/etc/apt/keyrings/docker.asc
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># Add the repository to Apt sources:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="nb">echo</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="s2">&quot;deb [arch=</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="s2">  </span><span class="k">$(</span>.<span class="w"> </span>/etc/os-release<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$VERSION_CODENAME</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2"> stable&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">  </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/docker.list<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
</span></code></pre></div>
Creamos un fichero con la extensión .sh y pegamos el anterior script dentro de este y lo guardamos con el nombre que querramos.
<img alt="Creación del script" src="../../../images/pcr61/image.png" /></p>
<p>Para ejecutar el script, debemos de darle permisos de ejecución, para ello usamos el siguiente comando:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>chmod<span class="w"> </span>+x<span class="w"> </span>&lt;nombre_fichero&gt;.sh
</span></code></pre></div></p>
<p>Una vez hecho esto, ejecutamos como administrador el script ya que contiene comandos que necesitan permisos elevados para realizar ciertas acciones.</p>
<p><img alt="Ejecución del script" src="../../../images/pcr61/image-1.png" /></p>
<h3 id="instalar-docker">Instalar docker</h3>
<p>Para instalar docker usamos el gestor de paquetes del sistema, con los siguientes paquetes necesarios para docker</p>
<p><div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>docker-ce<span class="w"> </span>docker-ce-cli<span class="w"> </span>containerd.io<span class="w"> </span>docker-buildx-plugin<span class="w"> </span>docker-compose-plugin
</span></code></pre></div>
<img alt="Instalación de docker" src="../../../images/pcr61/image-2.png" /></p>
<p>Una vez instalados debemos de hacer un paso extra y es añadir al usuario que vaya a usar docker al grupo <code>docker</code> del sistema que se habrá creado después de la instalación de los paquetes. Esto se debe de hacer porque al intentar ejecutar algún comando de docker sin estar dentro del grupo, nos 
dará un error de <code>Permission denied</code>.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>usermod<span class="w"> </span>-a<span class="w"> </span>-G<span class="w"> </span>docker<span class="w"> </span>&lt;nombre_usuario&gt;
</span></code></pre></div>
<p><img alt="Añadir el usuario al grupo docker" src="../../../images/pcr61/image-5.png" /></p>
<h2 id="clonacion-de-proyecto-nodejs">Clonación de proyecto NodeJS</h2>
<p>Ahora para hacer el proceso de contenerización, usaremos el proyecto de NodeJS que proporciona la práctica, por lo que usaremos <code>git clone</code> para clonar el repositorio:</p>
<p><div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/raul-profesor/DAW_practica_6.1_2024.git
</span></code></pre></div>
<img alt="Clonación del proyecto" src="../../../images/pcr61/image-3.png" /></p>
<h2 id="creacion-de-la-imagen-de-docker">Creación de la imagen de docker</h2>
<p>Docker para contenerizar las aplicaciones se basan en imágenes que son un conjunto de instrucciones que seguirá docker al momento de crear las imagenes de la aplicación, dichas instrucciones son indicadas en los archivos <code>Dockerfile</code> y usa una serie de palabras clave, las cuales explicaré únicamente las usadas en el dockerfile de la captura. </p>
<p><img alt="DockerFile" src="../../../images/pcr61/image-4.png" /></p>
<ul>
<li>
<p><code>FROM</code>: Esta directiva indica desde que imagen partirá la imagen que estamos creando. Esto es debido a que necesitas una imagen de base, que puede ser desde una de un sistema operativo (mas reducido) o una aplicación que usa a la vez una imagen de un sistema operativo para funcionar. </p>
<p>En el caso de la práctica usamos una imagen de NodeJS 18 que será usada con el sistema operativo Alpine, uno muy ligero orientado a la seguridad y muy usado en contenedores.</p>
</li>
<li>
<p><code>RUN</code>: Esta directiva permite ejecutar comandos durante la creación de la imagen para hacer lo que necesitemos, en mi caso, crear una carpeta</p>
</li>
<li><code>WORKDIR</code>: Esta directiva permite cambiar el directorio de trabajo actual, es equivalente a <code>cd</code> para que lo entendamos mejor. </li>
<li><code>COPY</code>: Esta directiva permite copiar ficheros a la imagen, desde el sistema operativo nuestro (en mi caso Ubuntu) al sistema de la imagen docker.</li>
<li>
<p><code>EXPOSE</code>: Esta directiva permite exponer un puerto para indicar a los contenedores que usen la imagen que usaran ese puerto para escuchar las peticiones. </p>
<p>Hay que tener en cuenta que esto no abre un puerto en el contenedor, hay que hacerlo explicitamente mapeandolo en el comando <code>docker run</code></p>
</li>
<li>
<p><code>CMD</code>: Esta directiva indica que comando será ejecutado en el tiempo de ejecución del contenedor, es decir, que durante la creación de la imagen no es ejecutado.</p>
</li>
</ul>
<p>Ahora para crear la imagen de docker, se deberá de hacer con el siguiente comando y estando en la carpeta que contiene el fichero Dockerfile.</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>librodirecciones<span class="w"> </span>.
</span></code></pre></div>
<p><img alt="Construcción de la imagen docker" src="../../../images/pcr61/image-6.png" /></p>
<h2 id="creacion-del-contenedor-de-docker">Creación del contenedor de docker</h2>
<p>Para crear un contenedor de docker usamos el comando <code>docker run</code>, al que le podemos indicar la imagen del contenedor. Los parámetros que usamos son los siguientes:</p>
<ul>
<li><code>-p</code>: Este parámetro permite mapear un puerto de la imagen a un puerto del contenedor, sigue el siguiente formato: <code>&lt;puerto_imagen&gt;:&lt;puerto_contenedor&gt;</code></li>
<li><code>--name</code>: nombre del contenedor para que se le pueda hacer referencia mas fácilmente mas adelante, por ejemplo para borrarlo.</li>
<li><code>-d</code>: indicamos que el contenedor será ejecutado en segundo plano tras la creación de este.</li>
</ul>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">3000</span>:3000<span class="w"> </span>--name<span class="w"> </span>&lt;nombre&gt;<span class="w"> </span>-d<span class="w"> </span>librodirecciones
</span></code></pre></div>
<p><img alt="Creación y ejecución del contenedor" src="../../../images/pcr61/image-7.png" /></p>
<p>Comprobamos los logs del contenedor para ver si todo salió bien, usamos el comando <code>docker logs</code>.</p>
<p><img alt="Comprobación de que el contenedor está ejecutándose" src="../../../images/pcr61/image-8.png" /></p>
<p>Ahora probamos acceder al servidor, usando el puerto que mapeamos en el contenedor y si todo sale bien sale lo de la captura.</p>
<p><img alt="Comprobación de la API en el navegador" src="../../../images/pcr61/image-9.png" /></p>
<h2 id="integrando-multiples-contenedores">Integrando múltiples contenedores</h2>
<p>Cuando necesitamos usar diferentes contendores de Docker, podemos hacerlo usando <code>docker network</code> que nos permite crear redes virtuales para los contenedores
y así poder interconectar estos entre sí. Se puede hacer y es recomendable saber como funciona pero después para el momento de desplegar
contenedores unos dependientes de otros puede ser un quebradero de cabeza por lo que para esto se ha creado la utilidad <strong>Docker Compose</strong>.</p>
<p>Docker Compose se basa en un archivo YAML de configuración donde definimos los diferentes contenedores con lo que necesitemos para que funcione,
la ventaja de esto es que nos permite compartir un archivo con la configuración de todo y con esto únicamente poder desplegar las aplicaciones en diferentes
entornos diferentes de forma mucho más sencilla que usando únicamente docker. Además de poder crear contenedores que dependan de otros de forma mucho más sencilla
como es en el caso de esta aplicación.</p>
<div class="language-yaml highlight"><span class="filename">docker-compose.yml</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3.9&quot;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">services</span><span class="p">:</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nt">postgres</span><span class="p">:</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres:latest</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">      </span><span class="nt">POSTGRES_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">      </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"> </span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;5432:5432&#39;</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">addressbook-db:/var/lib/postgresql/data</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">  </span><span class="nt">addressbook</span><span class="p">:</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">    </span><span class="nt">build</span><span class="p">:</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">      </span><span class="nt">DB_SCHEMA</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">      </span><span class="nt">DB_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w">      </span><span class="nt">DB_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">      </span><span class="nt">DB_HOST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;3000:3000&#39;</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="nt">volumes</span><span class="p">:</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">  </span><span class="nt">addressbook-db</span><span class="p">:</span>
</span></code></pre></div>
<p>Si solo queremos desplegarlo, solo nos importa que tengamos el archivo y a partir de ahi usar la utilidad <code>compose</code> que viene incorporada en Docker
desde hace unos años atrás (en versiones anteriores tenía que descargarse a parte, cosa que viene explicada en la documentación de Docker oficial).</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Los comando de compose se recomienda ejecutarse dentro de la carpeta que contenga el fichero <code>docker-compose.yml</code> ya que ese nombre es el por 
defecto que docker compose buscará al momento de realizar alguno. </p>
<p>En caso de tener varios ficheros .yml, podemos indicar a compose por medio del parámetro <code>-f</code> cual queremos usar,
por ejemplo: <code>docker compose -f docker-compose.ci.yml up</code>.</p>
</div>
<p>Los comandos más usados son los siguientes:</p>
<ul>
<li><code>docker compose up</code>: Permite levantar uno o todos los servicios del fichero docker-compose.yml.</li>
<li><code>docker compose down</code>: Permite eliminar uno o todos los servicios del fichero docker-compose.yml.</li>
<li><code>docker compose start</code>: Permite iniciar uno o todos los servicios del fichero docker-compose.yml.</li>
<li><code>docker compose stop</code>: Permite parar uno o todos los servicios del fichero docker-compose.yml.</li>
<li><code>docker compose run</code>: Permite ejecutar un comando dentro de un servicio específico del fichero docker-compose.yml</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Para saber más a fondo puedes acceder a la <a href="https://docs.docker.com/compose/">documentación</a> de docker compose.</p>
</div>
<h3 id="crear-tablas-de-la-base-de-datos">Crear tablas de la base de datos</h3>
<p>Para que la aplicación que desplegamos con docker funcione, este depende de una base de datos para funcionar. Para ello la propia aplicación 
nos propociona un script para poder crear las tablas, para ello simplemente usamos el siguiente comando:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>run<span class="w"> </span>addressbook<span class="w"> </span>npm<span class="w"> </span>run<span class="w"> </span>migrate
</span></code></pre></div>
<p>Esto conectará con el contenedor PostgreSQL del <code>docker-compose.yml</code> y si está levantado creará las tablas</p>
<p><img alt="Crear bases de datos" src="../../../images/pcr61/image-10.png" /></p>
<h3 id="ejecutar-tests-de-la-aplicacion">Ejecutar tests de la aplicación</h3>
<p>Una vez tenemos lo anterior funcionando, ya solo nos queda probar que todo funciona. Podemos desplegar la aplicación y probarla pero también podemos
usar la batería de tests que esta propociona para ver que todo funciona correctamente, para ello usamos el siguiente comando:
<div class="language-sh highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>run<span class="w"> </span>addressbook<span class="w"> </span>npm<span class="w"> </span><span class="nb">test</span>
</span></code></pre></div>
<img alt="Tests de la aplicación pasados" src="../../../images/pcr61/image-12.png" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Para esto debemos de tener funcionando la base de datos, lo hará de forma automática ya que tenemos definido que el servicio <code>addressbook</code> dependa
del contendor de PostgreSQL. Quiero aclararlo por si ocurre que por alguna razón u otra no funcionan los tests</p>
</div>
<h3 id="poner-en-marcha-la-app">Poner en marcha la app</h3>
<p>Una vez hecho los pasos anteriores, desplegamos la aplicación completamente con el siguiente comando: 
<div class="language-sh highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>--build<span class="w"> </span>-d
</span></code></pre></div></p>
<p>Si nos fijamos, tenemos dos parámetros en el comando, esto hace que:</p>
<ul>
<li><code>--build</code>: Obliga a docker compose a reconstruir (en caso de que esté creada la imagen con anterioridad, si no existe la construirá sin este parámetro) los servicios que crea contenedores a partir de un Dockerfile, como es el caso de <code>addressbook</code>.</li>
<li><code>-d</code>: Indica a docker compose que estos contendores al terminar de crearse, se ejectuarán en segundo plano, por lo que no mostrará los logs de estos, nos dejará en la terminal para que hagamos lo que necesitemos.</li>
</ul>
<p><img alt="Contruir contenedores con compose" src="../../../images/pcr61/image-11.png" /></p>
<h3 id="probando-la-aplicacion">Probando la aplicación</h3>
<p>Probad que la aplicación junto con la BBDD funciona correctamente. El funcionamiento de la API es:</p>
<ul>
<li>PUT /persons/ añade una persona al libro de direcciones:
<img alt="Añadir persona de persona" src="../../../images/pcr61/image-13.png" /></li>
<li>GET /persons/all muestra todas las personas en el libro de direcciones
<img alt="Mostrar todas las personas" src="../../../images/pcr61/image-14.png" /></li>
<li>GET /persons/1 muestra la persona con el id 1
<img alt="Mostrar persona con id 1" src="../../../images/pcr61/image-15.png" /></li>
<li>DELETE /persons/1 elimina a la persona con el id 1
<img alt="Eliminar a la persona 1" src="../../../images/pcr61/image-16.png" /></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>