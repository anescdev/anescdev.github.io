
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../practica2-5/">
      
      
        <link rel="next" href="../../Tema%203/practica3-1/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Práctica de amplicación: Configuración de un servidor Nginx con Hosts Virtuales y directorios de usuario - AnesCatmanDev Daw</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-de-amplicacion-configuracion-de-un-servidor-nginx-con-hosts-virtuales-y-directorios-de-usuario" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AnesCatmanDev Daw" class="md-header__button md-logo" aria-label="AnesCatmanDev Daw" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AnesCatmanDev Daw
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica de amplicación: Configuración de un servidor Nginx con Hosts Virtuales y directorios de usuario
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AnesCatmanDev Daw" class="md-nav__button md-logo" aria-label="AnesCatmanDev Daw" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AnesCatmanDev Daw
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to MkDocs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DAWEB
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            DAWEB
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Tema 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica2-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.1: Instalación y configuración de un servidor web Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica2-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.2: Autenticación en un servidor web Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica2-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.3: Proxy inverso con Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica2-4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.4: Balanceo de carga con proxy inverso en Nginx
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../practica2-5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica 2.5: Proxy inverso y balanceo de carga con SSL en NGINX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Práctica de amplicación: Configuración de un servidor Nginx con Hosts Virtuales y directorios de usuario
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Práctica de amplicación: Configuración de un servidor Nginx con Hosts Virtuales y directorios de usuario
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#conexion-al-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      Conexión al servidor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usuarios-y-carpetas" class="md-nav__link">
    <span class="md-ellipsis">
      Usuarios y carpetas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usuarios y carpetas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-de-usuarios" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de usuarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-estructura-de-carpetas" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de estructura de carpetas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-paginas-webs-estaticas" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de páginas webs estáticas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion-de-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de NGINX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-basica-de-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración básica de NGINX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generar-certificado-para-https" class="md-nav__link">
    <span class="md-ellipsis">
      Generar certificado para HTTPS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-los-hosts-virtuales" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de los hosts virtuales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#habilitacion-de-los-hosts-virtuales" class="md-nav__link">
    <span class="md-ellipsis">
      Habilitación de los hosts virtuales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-al-host-del-anfitrion-nombre-de-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      Añadir al host del anfitrión nombre de hosts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-funcionamiento-de-los-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba de funcionamiento de los hosts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prueba de funcionamiento de los hosts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#porri-web" class="md-nav__link">
    <span class="md-ellipsis">
      Porri web
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#churrunchilla-web" class="md-nav__link">
    <span class="md-ellipsis">
      Churrunchilla web
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Tema 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.1: Instalación de Tomcat y Maven para despliegue de aplicación Java
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.2: Despliegue de aplicaciones con Node Express y en Netlify
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.3: Despliegue de una aplicación Flask (Python)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 4
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Tema 4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%204/practica4-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 4.1: Configuración de un servidor DNS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 5
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Tema 5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%205/practica5-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 5.1: Ejercicios de Git
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 6
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Tema 6
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%206/practica6-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.1: Dockerización del despliegue de una aplicación con NodeJS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%206/practica6-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.2: Despliegue de una aplicación PHP con Nginx y MySQL usando Docker y docker-compose
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%206/practica6-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.3: Despliegue de servidores web con usuarios autenticados mediante LDAP usando Docker y docker-compose
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#conexion-al-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      Conexión al servidor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usuarios-y-carpetas" class="md-nav__link">
    <span class="md-ellipsis">
      Usuarios y carpetas
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usuarios y carpetas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creacion-de-usuarios" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de usuarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-estructura-de-carpetas" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de estructura de carpetas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-paginas-webs-estaticas" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de páginas webs estáticas
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Nginx
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nginx">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instalacion-de-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación de NGINX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-basica-de-nginx" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración básica de NGINX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generar-certificado-para-https" class="md-nav__link">
    <span class="md-ellipsis">
      Generar certificado para HTTPS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creacion-de-los-hosts-virtuales" class="md-nav__link">
    <span class="md-ellipsis">
      Creación de los hosts virtuales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#habilitacion-de-los-hosts-virtuales" class="md-nav__link">
    <span class="md-ellipsis">
      Habilitación de los hosts virtuales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anadir-al-host-del-anfitrion-nombre-de-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      Añadir al host del anfitrión nombre de hosts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prueba-de-funcionamiento-de-los-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      Prueba de funcionamiento de los hosts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prueba de funcionamiento de los hosts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#porri-web" class="md-nav__link">
    <span class="md-ellipsis">
      Porri web
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#churrunchilla-web" class="md-nav__link">
    <span class="md-ellipsis">
      Churrunchilla web
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-de-amplicacion-configuracion-de-un-servidor-nginx-con-hosts-virtuales-y-directorios-de-usuario">Práctica de amplicación: Configuración de un servidor Nginx con Hosts Virtuales y directorios de usuario</h1>
<p>En esta práctica se configurará un servidor web que servirá diferentes rutas de los usuarios que vamos a crear en la misma práctica</p>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Para no hacer excesivamente largo el documento, las capturas que requieran exactamente la misma configuración cambiando por ejemplo el
nombre de usuario, solo se hará una vez.</p>
</div>
<h2 id="conexion-al-servidor">Conexión al servidor</h2>
<p>Para realizar la práctica se hará tal y como se pidió en clase, mediante SSH por lo que para demostrar esto dejo la captura de pantalla que 
muestra como me conecto al servidor</p>
<p><img alt="Conexión al servidor mediante SSH" src="../../../images/pcr2amp/ssh_connect_server.png" /></p>
<h2 id="usuarios-y-carpetas">Usuarios y carpetas</h2>
<p>En este apartado se va a mostrar como crear los usuarios, la estructura de carpetas con sus permisos correspondientes y la página de pruebas 
para comprobar que todo funcione correctamente.</p>
<h3 id="creacion-de-usuarios">Creación de usuarios</h3>
<p>Para crear los usuarios vamos a crearlos lo más básico posible ya que no lo usaremos como usuario de trabajo frecuente, únicamente nos hace falta
que pueda iniciar sesión y que tenga su carpeta de usuario respectiva. Para ello usaremos los siguientes comandos:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span>&lt;usuario&gt;<span class="w"> </span><span class="c1"># Crear el usuario con carpeta home y que su shell por defecto sea bash</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>passwd<span class="w"> </span>&lt;usuario&gt;<span class="w"> </span><span class="c1"># Definimos contraseña al usuario</span>
</span></code></pre></div></p>
<p><img alt="Creación de usuarios" src="../../../images/pcr2amp/user_password_creation.png" /></p>
<h3 id="creacion-de-estructura-de-carpetas">Creación de estructura de carpetas</h3>
<p>La carpeta a la que Nginx accederá será <code>public_html</code>, el nombre por defecto de la carpeta donde está las páginas web en los directorios
de usuario, por lo que para crear esta carpeta deberemos de:</p>
<ol>
<li>Iniciar sesión con el usuario y acceder a su carpeta home (<code>su &lt;usuario</code> y después <code>cd ~</code>)</li>
<li>Crear la carpeta la carpeta anteriormente mencionada (<code>mkdir public_html</code>)</li>
<li>
<p>Cambiar los permisos para que pueda acceder nginx. Estos permisos en vez de hacerlos de forma tradicional, lo haremos usando las ACL,
    un sistema de permisos alternativo pero aceptado dentro de la comunidad de Linux, el cuál trae por defecto instalado. </p>
<p>Este lo que permite es crear una máscara de permisos mas específica completa, permitiéndonos hacer de forma sencilla lo que queremos 
en este caso que es que el usuario de nginx <code>www-data</code> pueda acceder a la carpeta y a los nuevos archivos que el usuario vaya creando 
dentro de esta carpeta. El comando sería el siguiente: 
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>setfacl<span class="w"> </span>-d<span class="w"> </span>-R<span class="w"> </span>-m<span class="w"> </span>u:www-data:rw<span class="w"> </span>public_html
</span></code></pre></div></p>
<p>El comando usa una serie de argumentos y después la carpeta o archivo donde se aplicará la máscara de permisos especiales. Los parámetros
que hemos usado son:</p>
<ul>
<li><code>-d</code>: Indica que cada archivo nuevo o directorio dentro de esta carpeta, se aplicará la regla ACL de más abajo</li>
<li><code>-R</code>: Se aplicará de forma recursiva, inútil ahora mismo ya que no hay ningún archivo creado pero por costumbre prefiero ponerlo.</li>
<li>
<p><code>-m</code>: Parámetro para indicar la regla ACL que queremos aplicar al archivo, sigue este patrón <code>&lt;(u|g)&gt;:&lt;(usuario | grupo)&gt;:&lt;r | w | x&gt;</code>. </p>
<p>Para entender el patrón lo dividiremos en tres partes, en la primera indicamos a que va a aplicar la regla, si a un usuario o un grupo,
en la segunda parte a que usuario o grupo afectará la regla y en la tercera el permiso que tendrá ese usuario o grupo. </p>
<p>Algo extra a añadir, es que en el patrón podemos añadir mas tipos de ACL, es decir a parte de usuario y grupo pues podemos añadir también 
a "otros usuarios" para establecer los permisos del archivo o directorio en general pero este por ejemplo desde mi opinión es mas útil 
establecerlo con el sistema tradicional de permisos de linux, es decir con <code>chmod</code>.</p>
</li>
</ul>
</li>
</ol>
<p>Tras esto para comprobar que todo funciona correctamente se usa el siguiente comando para ver si las ACL son correctas:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>getfacl<span class="w"> </span>&lt;ruta_carpeta&gt;
</span></code></pre></div></p>
<p><img alt="Añadir www-data en ACL" src="../../../images/pcr2amp/user_permissions_acl.png" /></p>
<h3 id="creacion-de-paginas-webs-estaticas">Creación de páginas webs estáticas</h3>
<p>Para comprobar que todo es correcto se creará un archivo <code>index.html</code> para cada usuario en su carpeta <code>public_html</code>, con el fin de que se 
muestre como página principal y comprobar que todo funciona correcamente.</p>
<p><img alt="Creación de web estática del usuario" src="../../../images/pcr2amp/user_web_static.png" /></p>
<h2 id="nginx">Nginx</h2>
<h3 id="instalacion-de-nginx">Instalación de NGINX</h3>
<p>Para poder instalar Nginx en Debian 12 tenemos dos formas, mediante APT y manualmente, obviamente lo haremos mediante el gestor de paquetes APT ya
que es más cómodo y más rápido y no nos hace falta una versión en específico antigua.</p>
<p>Se ejecutarán los siguientes comandos (aunque en la captura salgan en una sola línea):
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="c1"># Actualiza la lista de repositorios</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>upgrade<span class="w"> </span><span class="c1"># Actualiza los paquetes que tengan una nueva versión disponible</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>nginx<span class="w"> </span><span class="c1"># Instala el servidor web Nginx</span>
</span></code></pre></div></p>
<p><img alt="Instalación de NGINX" src="../../../images/pcr2amp/nginx_command_installation.png" /></p>
<p>Para comprobar que está funcionando se puede hacer el comando <code>systemctl status nginx</code> y comprobar el estado del servicio pero también 
podemos intentar acceder al servidor web mediante un navegador y comprobar que muestra la página web por defecto de Nginx, como en la captura.</p>
<p><img alt="Prueba de instalación" src="../../../images/pcr2amp/nginx_installation_test.png" /></p>
<h3 id="configuracion-basica-de-nginx">Configuración básica de NGINX</h3>
<p>La configuración por defecto de NGINX que nos proporciona APT para este ejemplo nos será mas que suficiente para realizar la práctica, 
lo que si haremos es la configuración de los hosts pero esto será más adelante.</p>
<h3 id="generar-certificado-para-https">Generar certificado para HTTPS</h3>
<p>Para hacer que NGINX sirva la página web usando HTTPS como ya sabemos necesitamos indicarle que certificado usar para cifrar los datos,
para ello normalmente se usa uno que nos proporcionaría una autoridad certificadora oficial, pero como para ello necesitamos que primeramente
el servidor esté ya en Internet y no en nuestra red local, usaremos directamente uno autofirmado, el cual se generará con el siguiente comando.
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>openssl<span class="w"> </span>req<span class="w"> </span>-x509<span class="w"> </span>-newkey<span class="w"> </span>rsa:4096<span class="w"> </span>-keyout<span class="w"> </span>&lt;private_key_file&gt;<span class="w"> </span>-out<span class="w"> </span>&lt;certificate_file&gt;<span class="w"> </span>-sha256<span class="w"> </span>-days<span class="w"> </span><span class="m">365</span><span class="w"> </span>--nodes
</span></code></pre></div></p>
<p>Este comando para entenderlo lo deglosaremos en sus parámetros:</p>
<ul>
<li><strong>req</strong>: comando que indica a openssl que vas a iniciar una petición de firmado de certificado.</li>
<li><strong>x509</strong>: indica que usará la estructura de certificado X.509.</li>
<li><strong>newkey</strong>: indica que generará una clave usando el algoritmo indicado despues con <code>&lt;algoritmo&gt;:&lt;bits&gt;</code>.</li>
<li><strong>keyout</strong>: archivo donde se guardará la clave privada.</li>
<li><strong>out</strong>: archivo donde se guardará el certificado.</li>
<li><strong>sha256</strong>: indicamos que el certificado usará SHA-256 para calcular el hash.</li>
<li><strong>days</strong>: número de días de válidez del certificado.</li>
<li><strong>nodes</strong>: no encripta la clave privada, por lo que no nos pedirá contraseña para la clave. Lo usamos aquí para que
no de problemas con Nginx al momento de importarla en el host. <strong>Recomendable usar el parámetro <code>noenc</code> ya que <code>nodes</code> está en desuso pero aun funciona.</strong></li>
</ul>
<p>Los certificados los generaré en el directorio <code>/etc/ssl/certs/</code> y su correspondiente clave privada en <code>/etc/ssl/private</code>, uno por cada dominio.</p>
<p><img alt="Generar certificado" src="../../../images/pcr2amp/selfsigned_certifcate_generation.png" /></p>
<h3 id="creacion-de-los-hosts-virtuales">Creación de los hosts virtuales</h3>
<p>Para crear los hosts virtuales, tendremos en cuenta que ya se servirán encriptados los datos, pero para que quede lo mejor posible, también haremos
la configuración para el protocolo HTTP que redirigirá a HTTPS y así no muestra un error feo al usuario.</p>
<p>Empezemos con la redirección ya que es lo más sencillo, en el mismo archivo de configuración del host virtual crearemos un bloque <code>server {...}</code> con
dicha configuración, quedaría de la siguiente forma: 
<div class="language-nginx highlight"><span class="filename">/etc/nginx/sites-available/porri</span><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">...</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="s">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="c1"># Escucha en el puerto 80 por IPV4</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="c1"># Escucha en el puerto 80 por IPV6</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="s">[::]:80</span><span class="p">;</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="c1"># Nombre del host que está escuchando</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">&lt;nombre_host&gt;</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">        </span><span class="c1"># Redirección hacia HTTPS al mismo host y mismo recurso.</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">        </span><span class="kn">return</span><span class="w"> </span><span class="mi">301</span><span class="w"> </span><span class="s">https://</span><span class="nv">$host:$request_uri</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="p">}</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="k">...</span>
</span></code></pre></div></p>
<p>Una vez hecha la redirección vamos a hacer la configuración del host para el puerto 443:
<div class="language-nginx highlight"><span class="filename">/etc/nginx/sites-available/porri</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">...</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="s">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="c1"># Escucha en el puerto 443 por IPV4</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="c1"># Escucha en el puerto 443 por IPV6</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="s">[::]:443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="c1"># Directorio del que servirá los archivos, en este caso la carpeta </span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="c1"># public_html de los usuarios</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="kn">root</span><span class="w"> </span><span class="s">&lt;direccion_raiz_servidor&gt;</span><span class="p">;</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">    </span><span class="c1"># Rutas a los archivos generados del certificado</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="kn">ssl_certificate</span><span class="w"> </span><span class="s">&lt;direccion_certificado_tls-ssl&gt;</span><span class="p">;</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="kn">ssl_certificate_key</span><span class="w"> </span><span class="s">&lt;direccion_clave_privada_certificado_tls-ssl&gt;</span><span class="p">;</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="c1"># Archivo que buscará de índice</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="w">    </span><span class="kn">index</span><span class="w"> </span><span class="s">index.html</span><span class="p">;</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="w">    </span><span class="c1"># Nombre del host que está escuchando</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">&lt;nombre_host&gt;</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a><span class="w">        </span><span class="c1"># Redirección hacia HTTPS al mismo host y mismo recurso.</span>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">        </span><span class="kn">return</span><span class="w"> </span><span class="mi">301</span><span class="w"> </span><span class="s">https://</span><span class="nv">$host:$request_uri</span><span class="p">;</span><span class="w"> </span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="p">}</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="k">...</span>
</span></code></pre></div></p>
<p>Si nos fijamos, faltan algunas directivas como por ejemplo la que indica el tipo de cifrado, si usa SSL, TLS, etc... Esto podemos saltarlo gracias
a que está configurado en el archivo principal de configuración de nginx de <code>/etc/nginx/nginx.conf</code>.</p>
<p><img alt="Creación de virtual host" src="../../../images/pcr2amp/nginx_virtual_host.png" /></p>
<h3 id="habilitacion-de-los-hosts-virtuales">Habilitación de los hosts virtuales</h3>
<p>Para habilitar los hosts virtuales debemos de crear un enlace simbólico de las configuraciones que acabamos de hacer al directorio 
<code>/etc/nginx/sites-enabled</code>, para ello usaremos el siguiente comando:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>sudo<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/etc/nginx/sites-available/&lt;archivo_configuración&gt;<span class="w"> </span>/etc/nginx/sites-enabled
</span></code></pre></div></p>
<p>Una vez hecho este comando debemos de ejecutar el comando que comprueba si la configuración actual es correcta:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>sudo<span class="w"> </span>nginx<span class="w"> </span>-t
</span></code></pre></div></p>
<p>Si sale que todo es correcto, ya podremos reiniciar el servicio de Nginx con el siguiente comando para comprobar el acceso a las webs:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>nginx
</span></code></pre></div></p>
<p><img alt="Habilitación del virtual host" src="../../../images/pcr2amp/nginx_virtual_host_enabled.png" /></p>
<h3 id="anadir-al-host-del-anfitrion-nombre-de-hosts">Añadir al host del anfitrión nombre de hosts</h3>
<p>Para poder acceder a los hosts virtuales debemos de dirigirnos al dominio que hemos configurado en las directivas <code>server_name</code>, de forma normal 
esto se haría mediante un servidor DNS, pero debido a que no lo tenemos instalado ni tampoco comprado un dominio, debemos de modificar el archivo
<code>hosts</code> de nuestro sistema operativo para que esos dominios hagan referencia a la máquina virtual. </p>
<p>En todos los sistemas operativos principales
usan el mismo formato, lo único que puede cambiar el donde lo almacenan. En la captura se muestra en un sistema operativo UNIX-Like, pero en 
Windows se encuentra en <code>C:\Windows\System32\drivers\etc\hosts</code>.</p>
<p><img alt="Añadir a hosts" src="../../../images/pcr2amp/host_linux_hosts_file.png" /></p>
<h3 id="prueba-de-funcionamiento-de-los-hosts">Prueba de funcionamiento de los hosts</h3>
<p>Ahora probaremos acceder a cada dominio con un navegador web, mostraremos el aviso de que usa un certificado autofirmado para encriptar los
datos, la web y el certificado generado de cada dominio</p>
<h4 id="porri-web">Porri web</h4>
<hr />
<p><strong>Aviso de que usa un certificado autofirmado</strong>
<img alt="Prueba de funcionamiento de la Porri web" src="../../../images/pcr2amp/porri_web_test_1.png" /></p>
<p><strong>Mostramos la Porri web</strong>
<img alt="Prueba de funcionamiento de la Porri web" src="../../../images/pcr2amp/porri_web_test_2.png" /></p>
<p><strong>Mostramos certificado SSL/TLS</strong></p>
<p><img alt="Prueba certificado porri web" src="../../../images/pcr2amp/porri_web_test_3.png" /></p>
<h4 id="churrunchilla-web">Churrunchilla web</h4>
<hr />
<p><strong>Aviso de que usa un certificado autofirmado</strong>
<img alt="Prueba de funcionamiento de la Churrunchilla web" src="../../../images/pcr2amp/churrunchilla_web_test_1.png" /></p>
<p><strong>Mostramos la Churrunchilla web</strong>
<img alt="Prueba de funcionamiento de la Churrunchilla web" src="../../../images/pcr2amp/churrunchilla_web_test_2.png" /></p>
<p><strong>Mostramos certificado SSL/TLS</strong>
<img alt="Prueba certificado Churrunchilla web" src="../../../images/pcr2amp/churrunchilla_web_test_3.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>